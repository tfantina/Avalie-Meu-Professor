
<div class="panel panel-default">

  <div class="pannel-body">

    <!-- professor top info -->
    <div class="row">

            <div class="col-md-6">
                <h1 class="review_title"> <%= @professor.fullname %> </h1>
                <ul class="list-unstyled">
                  <% if !@review.blank? %>
                  <li> <strong>Average Review: </strong><div class="star-rating" data-score= <%= @avg_review %> </div>  <%= @avg_review %> stars. </li>

                  <% end %>

                  <li><strong>School: </strong><%= @professor.school %></li>
                  <li><strong>Department: </strong>  <%= @professor.department %></li>
                  <li><%= "#{@review.length}" " Review".pluralize(@review.length)%></li>
                </ul>
            </div>
      <div class="col-md-2">

          </br>
          </br>
          <% if !@review.blank? %>
            <%= link_to "Review this Professor", new_professor_review_path(@professor), class: "btn btn-primary"%>
          <% end %>
      </div>
    </div>
    <br>
    <!-- end top info -->


    <!-- start reviews -->
    <!-- what if the review is blank -->

          <% if @review.blank? %>
            <h3> This professor is not yet reviewed would you like to review: </h3>
            <center><%= link_to "Review Now!", new_professor_review_path(@professor), class: "btn btn-danger btn-lg" %></center>
    <!-- for every other review -->
          <% else %>
          <!-- reviews start -->
            <% @review.each do |review| %>
            <div class="row review">
            <div class="col-sm-2 review-panl">
                <div class="location">
                    <div class="star-rating" data-score= <%= review.hw %> </div>
                </div>
                <div class="row">
                <%= link_to vote_review_path(review), method: :post, class: "vote-up", :remote => true do  %>
                <span class="glyphicon glyphicon-chevron-up has-tooltip", title="Vote this comment up if you found it useful."></span>
                <% end %>
                <%= link_to downvote_review_path(review), method: :post, class: "vote-up", :remote => true do  %>
                <span class="glyphicon glyphicon-chevron-up has-tooltip", title="Vote this comment up if you found it useful."></span>
                <% end %>

              </div>
              <div class="row">
              <%= link_to flag_review_path(review), method: :post, :remote => true do %>
                <span class="glyphicon glyphicon-flag has-tooltip", title="Flag as inappropriate or irrelevent"></span>
                <% end %>
            </div>
            </div>
          </div>

            <div class="col-md-7">

                  <%= review.comment %>



              </div>
              <div class="col-md-2"></div>

          </div>

          <br>
          <% end %>
          <% end %>
      </div>
      <% if user_signed_in? && current_user.admin? %>
      <%= link_to 'Edit', edit_professor_path(@professor) %> |
      <%= link_to 'Delete', @professor, method: :delete, data: {confirm: "Are you sure you want to delete this professor?"} %> |
      <% end %>

      <%= link_to 'Flag', flag_professor_path(@professor), method: :post, :remote => true %>
      <%= link_to 'Back', professors_path %>

</div>

<script> $(document).ready
  $("#flag").on("ajax:success", (e, data, status, xhr))
    $("#flag").append xhr.responseText
  ).on "ajax:error", (e, xhr, status, error)
    $("#flag").append "<p>ERROR</p>"
    </script>
<script>
  $('.star-rating').raty({
      path: 'http://dev.travisfantina.com/stars/',
      readOnly: true, score: function(){
          return $(this).attr('data-score');
      }
  });
  </script>
